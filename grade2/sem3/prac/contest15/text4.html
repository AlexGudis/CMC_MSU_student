<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<title>Problem statement</title>
</head>
<body>
<h3>Problem mz15-4: mz15-4</h3>
<p>Программе задаются следующие аргументы командной строки:</p>
<ul>
<li>Ключ IPC для очереди сообщений</li>
<li>Число процессов для запуска n</li>
<li>64-битное целое число value1</li>
<li>64-битное целое число value2</li>
<li>64-битное целое число maxval</li>
</ul>

<p>Программа должна создать n процессов. Каждый процесс имеет свой номер от 0 до n - 1.
Когда процесс получает очередь хода, с помощью очереди сообщений процесс должен получить два
64-битных целых числа x1, x2, вычислить их сумму x3 = x1 + x2, напечатать на стандартный поток вывода
свой номер и число x3, затем переслать числа x2 и x3 процессу с номером x3 % n.</p>

<p>Гарантируется, что x3 всегда будет неотрицательным.</p>

<p>Если x3 по модулю больше значения maxval, то вместо пересылки следующему процессу все процессы должны завершиться.</p>

<p>В начале игры родительский процесс посылает процессу 0 числа value1 и value2.</p>

<p>Родительский процесс должен дождаться завершения работы всех процессов и сам завершиться.</p>

<p>Родительский процесс должен корректно обрабатывать ошибочное завершение fork(). При этом
все уже созданные процессы должны быть уничтожены. Родитель должен
завершиться с кодом 1. Все процессы должны использовать одну очередь
сообщений.</p>

<p>Можете использовать следующие варианты создания процессов
и синхронизации:</p>

<ul>
  <li>Процессы, SysV очередь сообщений (sys/msg).</li>
  <li>Процессы, POSIX очередь сообщений.</li>
  <li>Нити, mutex, condvar. condvar один на все нити.</li>
</ul>

<p>Первый аргумент командной строки не используется, если программа
не использует SysV IPC.</p>

<p>Другие варианты использовать запрещено.</p>

<p>Объекты, созданные для работы программы, например, массив семафоров,
должны быть уничтожены.</p>

<p>Пример запуска программы:</p>
<pre>../solution 1234 2 0 1 15</pre>

<p>Результат работы:</p>
<pre>0 1
1 2
0 3
1 5
1 8
0 13
1 21</pre>


</body>
</html>

